# Wiki

<aside class="success">
  Wiki's bieten Dozenten und Studenten die Möglichkeit, gemeinsame Dokumente zu
  erstellen. Zu verschiedenen Themen in der Veranstaltungen können Wikis erstellt und
  gepflegt werden. Eine Versionskontrolle ermöglicht, sich Änderungen zwischen den
  Dokumentenversionen anzuschauen.
</aside>

## Schema "wiki-pages"
Neben dem Inhalt und Namen enthält jede Wiki-Seite Metadaten zur aktuellen Version.
### Attribute

Attribut | Beschreibung
-------- | ------------
keyword  | Der Name der Wiki-Seite
content  | Der Inhalt der Wiki-Seite
chdate   | Das Datum der letzten Änderung
version  | Die aktuelle Versionsnummer

### Relationen

 Relation | Beschreibung
--------  | ------------
author    | Der Verfasser der Wiki-Seite
range     | Der Range einer Wiki-Seite ist der entsprechende Kurs

## Wiki-Seiten eines Kurses
   `GET /courses/{id}/wiki-pages`

### Parameter

   Parameter | Beschreibung
  ---------- | ------------
  id         | Die ID des Kurses

  ```shell
  curl --request GET \
      --url https://example.com/courses/<COURSE-ID>/wiki-pages \
      --header "Content-Type: application/vnd.api+json" \
      --header "Authorization: Basic `echo -ne "test_autor:testing" | base64`" \
  ```
### Autorisierung
      Der Nutzer sollte Mitglied des entsprechenden Kurses sein.

> Der Request liefert JSON ähnlich wie dieses:

      <%= partial "includes/json/_get_wiki_pages" %>
## Wiki-Seite

Gibt eine Wiki-Seite zurück.

   `GET /wiki-pages/{id}`

   Parameter | Beschreibung
  ---------- | ------------
  id         | Die ID der Wiki-Seite


  ```shell
  curl --request GET \
      --url https://example.com/wiki-pages/<ID> \
      --header "Content-Type: application/vnd.api+json" \
      --header "Authorization: Basic `echo -ne "test_autor:testing" | base64`" \
      --data
  ```
### Autorisierung
        Der Nutzer sollte Mitglied des entsprechenden Kurses sein.
  > Der Request liefert JSON ähnlich wie dieses:

        <%= partial "includes/json/_get_wiki" %>

## Wiki-Seite anlegen

Legt eine Wiki-Seite an.

   `POST /courses/{id}/wiki-pages`

   Parameter | Beschreibung
  ---------- | ------------
  id         | Die ID der Veranstaltung

  ```shell
  curl --request POST \
      --url https://example.com/courses/<COURSE-ID>/wiki \
      --header "Content-Type: application/vnd.api+json" \
      --header "Authorization: Basic `echo -ne "test_autor:testing" | base64`" \
      --data
      '{"data": {"type": "wiki-pages","attributes": {"keyword": "testing","content": "wiki created"}}}'
  ```
### Autorisierung
          Der Nutzer sollte Mitglied des entsprechenden Kurses sein.


## Wiki-Seite ändern

Aktualisiert eine Wiki-Seite.

   `PATCH /wiki-pages/{id}`

   Parameter | Beschreibung
  ---------- | ------------
  id         | Die ID der Wiki-Seite

curl --request PATCH \
      --url https://example.com/wiki-pages/<ID> \
      --header "Content-Type: application/vnd.api+json" \
      --header "Authorization: Basic `echo -ne "test_autor:testing" | base64`" \
      --data
      '{"data": {"type": "wiki-pages","attributes": {"content": "wiki changed"}}}'
  ```
### Autorisierung
            Der Nutzer sollte Mitglied des entsprechenden Kurses sein.
