
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Dokumentation der Stud.IP-JSON:API</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#einleitung" class="toc-h1 toc-link" data-title="Einleitung">Einleitung</a>
          </li>
          <li>
            <a href="#authentifizierung" class="toc-h1 toc-link" data-title="Authentifizierung">Authentifizierung</a>
          </li>
          <li>
            <a href="#nutzer" class="toc-h1 toc-link" data-title="Nutzer">Nutzer</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#schema" class="toc-h2 toc-link" data-title="Schema">Schema</a>
                  </li>
                  <li>
                    <a href="#get-users" class="toc-h2 toc-link" data-title="GET /users">GET /users</a>
                  </li>
                  <li>
                    <a href="#get-users-me" class="toc-h2 toc-link" data-title="GET /users/me">GET /users/me</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#activity-streams" class="toc-h1 toc-link" data-title="Activity Streams">Activity Streams</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#schema-quot-activities-quot" class="toc-h2 toc-link" data-title="Schema "activities"">Schema "activities"</a>
                  </li>
                  <li>
                    <a href="#alle-aktivitaten-auslesen" class="toc-h2 toc-link" data-title="Alle Aktivitäten auslesen">Alle Aktivitäten auslesen</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#dateibereich-v3-5" class="toc-h1 toc-link" data-title="Dateibereich v3.5">Dateibereich v3.5</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#schema-quot-documents-quot" class="toc-h2 toc-link" data-title="Schema "documents"">Schema "documents"</a>
                  </li>
                  <li>
                    <a href="#schema-quot-document-folders-quot" class="toc-h2 toc-link" data-title="Schema "document-folders"">Schema "document-folders"</a>
                  </li>
                  <li>
                    <a href="#schema-quot-document-licenses-quot" class="toc-h2 toc-link" data-title="Schema "document-licenses"">Schema "document-licenses"</a>
                  </li>
                  <li>
                    <a href="#alle-dokumente-einer-veranstaltung-einrichtung" class="toc-h2 toc-link" data-title="Alle Dokumente einer Veranstaltung/Einrichtung">Alle Dokumente einer Veranstaltung/Einrichtung</a>
                  </li>
                  <li>
                    <a href="#alle-ordner-einer-veranstaltung-einrichtung" class="toc-h2 toc-link" data-title="Alle Ordner einer Veranstaltung/Einrichtung">Alle Ordner einer Veranstaltung/Einrichtung</a>
                  </li>
                  <li>
                    <a href="#ein-dokument-auslesen" class="toc-h2 toc-link" data-title="Ein Dokument auslesen">Ein Dokument auslesen</a>
                  </li>
                  <li>
                    <a href="#eine-dokument-datei-herunterladen" class="toc-h2 toc-link" data-title="Eine Dokument-Datei herunterladen">Eine Dokument-Datei herunterladen</a>
                  </li>
                  <li>
                    <a href="#eine-dokument-datei-aktualisieren" class="toc-h2 toc-link" data-title="Eine Dokument-Datei aktualisieren">Eine Dokument-Datei aktualisieren</a>
                  </li>
                  <li>
                    <a href="#ein-dokument-erstellen" class="toc-h2 toc-link" data-title="Ein Dokument erstellen">Ein Dokument erstellen</a>
                  </li>
                  <li>
                    <a href="#einen-ordner-auslesen" class="toc-h2 toc-link" data-title="Einen Ordner auslesen">Einen Ordner auslesen</a>
                  </li>
                  <li>
                    <a href="#alle-kindordner-eines-ordners" class="toc-h2 toc-link" data-title="Alle Kindordner eines Ordners">Alle Kindordner eines Ordners</a>
                  </li>
                  <li>
                    <a href="#alle-dokumente-eines-ordners" class="toc-h2 toc-link" data-title="Alle Dokumente eines Ordners">Alle Dokumente eines Ordners</a>
                  </li>
                  <li>
                    <a href="#eine-lizenz-auslesen" class="toc-h2 toc-link" data-title="Eine Lizenz auslesen">Eine Lizenz auslesen</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#dateibereich-v4-0" class="toc-h1 toc-link" data-title="Dateibereich v4.0+">Dateibereich v4.0+</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#schemata" class="toc-h2 toc-link" data-title="Schemata">Schemata</a>
                  </li>
                  <li>
                    <a href="#alle-dateien-einer-veranstaltung" class="toc-h2 toc-link" data-title="Alle Dateien einer Veranstaltung">Alle Dateien einer Veranstaltung</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#fehler" class="toc-h1 toc-link" data-title="Fehler">Fehler</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='#'>todo</a></li>
            <li><a href='#'>todo</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='einleitung'>Einleitung</h1>
<p>Willkommen bei der Dokumentation der Stud.IP-JSON:API! Mit dieser API
kann auf viele Daten einer Stud.IP-Installation zugegriffen werden.
Die API basiert auf der <a href="http://jsonapi.org/">JSON:API-Spezifikation</a>, ...</p>
<h1 id='authentifizierung'>Authentifizierung</h1>
<p>Stud.IP JSON:API verwendet zwei verschiedene Verfahren um Nutzer
zu authentifizieren:</p>

<ul>
<li>HTTP Basic access authentication</li>
<li>Stud.IP-Session-Cookies</li>
</ul>
<h1 id='nutzer'>Nutzer</h1>
<p>Die Nutzer der Stud.IP-Installationen können mit den folgenden Routen
abgefragt werden.</p>
<h2 id='schema'>Schema</h2>
<p>Alle Nutzer werden in Stud.IP mit diesem Schema abgebildet. Die <code>id</code>
entspricht der in Stud.IP verwendeten <code>user_id</code>. Der Typ ist <code>users</code>.</p>
<h3 id='attribute'>Attribute</h3>
<table><thead>
<tr>
<th>Attribut</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>der Nutzername</td>
</tr>
<tr>
<td>formatted-name</td>
<td>der formatierte Echtname des Nutzers</td>
</tr>
<tr>
<td>family-name</td>
<td>der Nachname des Nutzers</td>
</tr>
<tr>
<td>given-name</td>
<td>der Vorname des Nutzers</td>
</tr>
<tr>
<td>name-prefix</td>
<td>evtl. vorangestellte Titel</td>
</tr>
<tr>
<td>name-suffix</td>
<td>evtl. nachgestellte Titel</td>
</tr>
</tbody></table>
<h3 id='relationen'>Relationen</h3>
<aside class="notice">
    Nicht alle Relationen sind für jeden Betrachter zugänglich.
</aside>

<table><thead>
<tr>
<th>Relation</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>activitystream</td>
<td>ein Link zum <code>activity stream</code> des Nutzers</td>
</tr>
<tr>
<td>blubber-postings</td>
<td>die Blubber des Nutzers</td>
</tr>
<tr>
<td>contacts</td>
<td>die Kontakte des Nutzers</td>
</tr>
<tr>
<td>courses</td>
<td>die Veranstaltungen der Nutzers</td>
</tr>
</tbody></table>
<h2 id='get-users'>GET /users</h2>
<aside class="notice">
    Diese Route können aktuell nur Nutzer der Rechtestufe "root" verwenden. Andere
    Rechtestufen erhalten einen Fehler-Code 403.
</aside>
<pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
    --url https://example.com/api/users <span class="se">\</span>
    --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"root@studip:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span>
</code></pre>
<blockquote>
<p>Der Request liefert JSON ähnlich wie dieses:</p>
</blockquote>

<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"page"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/?page[offset]=0&amp;page[limit]=30"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/?page[offset]=0&amp;page[limit]=30"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76ed43ef286fb55cf9e41beadb484a9f"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"root@studip"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"formatted-name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Root Studip"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"family-name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Studip"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"given-name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Root"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name-prefix"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name-suffix"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"activitystream"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/users/76ed43ef286fb55cf9e41beadb484a9f/activitystream"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"blubber-postings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/blubber-postings?filter[user]=76ed43ef286fb55cf9e41beadb484a9f"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"contacts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/users/76ed43ef286fb55cf9e41beadb484a9f/contacts"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"courses"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/users/76ed43ef286fb55cf9e41beadb484a9f/courses"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/users/76ed43ef286fb55cf9e41beadb484a9f"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"[...]"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>`</p>

<p>Dieser Endpoint liefert alle Nutzer im Stud.IP, die der
JSON:API-Nutzer mit seinen <code>credentials</code> auch im Stud.IP selbst
sehen darf. Die Ausgabe erfolgt paginiert und kann durch Angabe von
Offset und Limit weitergeblättert werden.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET http://example.com/api/users</code></p>
<h3 id='query-parameter'>Query-Parameter</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>page[offset]</td>
<td>0</td>
<td>der Offset</td>
</tr>
<tr>
<td>page[limit]</td>
<td>30</td>
<td>das Limit</td>
</tr>
</tbody></table>
<h3 id='authorisierung'>Authorisierung</h3>
<p>Diese Route kann nur von Nutzern der Rechtestufe &quot;root&quot; verwendet werden.</p>
<h2 id='get-users-me'>GET /users/me</h2><pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
    --url https://example.com/api/users/me <span class="se">\</span>
    --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_dozent:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span>
</code></pre>
<blockquote>
<p>Der Request liefert JSON ähnlich wie dieses:</p>
</blockquote>

<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"205f3efb7997a0fc9755da2b535038da"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_dozent"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"formatted-name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testaccount Dozent"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"family-name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dozent"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"given-name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testaccount"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name-prefix"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name-suffix"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"activitystream"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/users/205f3efb7997a0fc9755da2b535038da/activitystream"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"blubber-postings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/blubber-postings?filter[user]=205f3efb7997a0fc9755da2b535038da"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"contacts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/users/205f3efb7997a0fc9755da2b535038da/contacts"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"courses"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/users/205f3efb7997a0fc9755da2b535038da/courses"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/users/205f3efb7997a0fc9755da2b535038da"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>`</p>

<p>Mit diesem Endpoint bekommt man denjenigen Stud.IP Nutzer, der
authorisiert auf diesen Endpoint zugreift – also sich selbst.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET http://example.com/api/users/me</code></p>
<h3 id='query-parameter-2'>Query-Parameter</h3>
<p>Es werden keine Query-Parameter unterstützt.</p>
<h3 id='authorisierung-2'>Authorisierung</h3>
<p>Diese Route kann von jedem authorisierten Nutzer verwendet werden.</p>
<h1 id='activity-streams'>Activity Streams</h1>
<p>Mit Stud.IP Version 3.5 wurde eine neue API zum Erzeugen, Darstellen
und Filtern von kontextrelevanten Aktivitäten eingeführt. Diese API
kann u.a. dafür genutzt werden um Nutzern einen schnellen Überblick
über die für ihn relevanten Information/Aktivitäten zu geben.</p>
<h2 id='schema-quot-activities-quot'>Schema &quot;activities&quot;</h2>
<p>Activity Streams enthalten Objekte des Typs &quot;activities&quot;. Diese geben
enthalten eine textuelle Beschreibung der Aktivität, ein Datum, eine
(etwas) detailiertere Beschreibung und die Art der Aktivität (das
Verb). Aktivitäten beziehen sich auf einen Akteur (in der Regel ein
Nutzer), einen Kontext, in dem sie stattfinden, und ein Objekt, auf
das sie sich beziehen.</p>
<h3 id='attribute'>Attribute</h3>
<table><thead>
<tr>
<th>Attribut</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>knappe Beschreibung der Aktivität: &quot;Wer tut was mit wem/was wo?&quot;</td>
</tr>
<tr>
<td>content</td>
<td>etwas detailiertere Beschreibung der Aktivität</td>
</tr>
<tr>
<td>mkdate</td>
<td>Datum der Aktivität</td>
</tr>
<tr>
<td>verb</td>
<td>Art der Aktivität</td>
</tr>
</tbody></table>

<p>Die verwendeten Verben sind normiert. Der Wertebereich umfasst:</p>

<p><code>answered, attempted, attended, completed, created, deleted,
edited, experienced, failed, imported, interacted, passed, shared,
sent, voided</code></p>
<h3 id='relationen'>Relationen</h3>
<p>Die Relationen sind nicht änderbar und können nur ausgelesen werden.</p>

<table><thead>
<tr>
<th>Relation</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>actor</td>
<td>Wenn der Akteur der Aktivität ein Nutzer ist, wird mit dieser Relation auf ihn verwiesen.</td>
</tr>
<tr>
<td>context</td>
<td>der Kontext, in dem die Aktivität stattfindet; kann eine der folgenden sein: Veranstaltung, Einrichtung, Nutzer oder System.</td>
</tr>
<tr>
<td>object</td>
<td>das Objekt, mit dem die Aktivität stattfindet; falls möglich wird hier auf eine Route in der JSON:API verwiesen</td>
</tr>
</tbody></table>
<h2 id='alle-aktivitaten-auslesen'>Alle Aktivitäten auslesen</h2><pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
    --url https://example.com/api/users/&lt;USER-ID&gt;/activitystream <span class="se">\</span>
    --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_autor:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://example.com/api/users/&lt;USER-ID&gt;/activitystream'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
    <span class="na">mode</span><span class="p">:</span> <span class="s1">'cors'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>
        <span class="s1">'Authorization'</span><span class="p">:</span> <span class="s2">`Basic </span><span class="p">${</span><span class="nx">btoa</span><span class="p">(</span><span class="s1">'test_autor:testing'</span><span class="p">)}</span><span class="s2">`</span>
    <span class="p">})</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>Der Request liefert JSON ähnlich wie dieses:</p>
</blockquote>

<p>Mit dieser Route können die Aktivitäten ausgelesen werden, die für einen
Nutzer sichtbar sind. Der Activity Stream wird paginiert ausgegeben.
Standardmäßig werden nur Aktivitäten <strong>der letzten 6 Monate</strong>
ausgegeben. Diese Einschränkung kann mit Hilfe des URL-Parameters
&#39;filter&#39; verändert werden.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://example.com/jsonapi/users/{id}/activitystream</code></p>
<h3 id='url-parameter'>URL-Parameter</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>filter</td>
<td>Filtermöglichkeit der anzuzeigenden Aktivitäten (Zeit und Typ)</td>
</tr>
<tr>
<td>include</td>
<td>ermöglicht das Inkludieren des Akteurs, des Kontexts und des Objekts in die JSON:API-Antwort</td>
</tr>
<tr>
<td>page</td>
<td>Einstellmöglichkeiten zur Paginierung</td>
</tr>
</tbody></table>
<h4 id='url-parameter-39-filter-39'>URL-Parameter &#39;filter&#39;</h4><pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
     --url <span class="s1">'https://example.com/api/users/&lt;USER-ID&gt;/activitystream?filter\[start\]=1263078000&amp;filter\[end\]=1409695200&amp;filter[activity-type]=documents'</span> <span class="se">\</span>
     --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_autor:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span>
</code></pre>
<p>Mit diesem URL-Parameter kann nach Typ und Datum der Aktivitäten
gefiltert werden. Möglich sind folgende Filter:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>filter[start]</td>
<td>zeitliche Beschränkung: Start des Abfrageintervalls</td>
</tr>
<tr>
<td>filter[end]</td>
<td>zeitliche Beschränkung: Ende des Abfrageintervalls</td>
</tr>
<tr>
<td>filter[activity-type]</td>
<td>nur Aktivitäten dieses Typs/dieser Typen werden zurückgeliefert</td>
</tr>
</tbody></table>

<p>Mit Hilfe der Parameter &#39;start&#39; und &#39;end&#39; kann das Abfrageintervall
verändert werden. Standardmäßig werden alle Aktivitäten der letzten 6
Monate bis zum aktuellen Zeitpunkt zurückgeliefert. Mit &#39;start&#39; und
&#39;end&#39; können diese Intervallgrenzen beliebig gestaltet werden. Für diese
beiden Parameter können nur ganzzahlige Werte angegeben werden, die
die Anzahl der Sekunden seit dem 01.01.1970 bis zum gewünschten
Zeitpunkt angeben (&#39;unix epoch time&#39;).</p>

<p>Der Parameter &#39;activity-type&#39; schränkt die Aktivitäten nach Typ ein.
Mögliche Werte sind:</p>

<p><code>activity, blubber, documents, forum, literature, message, news, participants, schedule, wiki</code></p>

<p>Um nach mehreren Aktivitätstypen zu filtern, können mehrere dieser
Typen durch Komma getrennt verwendet werden.</p>
<h4 id='url-parameter-39-include-39'>URL-Parameter &#39;include&#39;</h4><pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
     --url <span class="s1">'https://example.com/api/users/&lt;USER-ID&gt;/activitystream?include=actor,context'</span><span class="se">\</span>
     --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_autor:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span>
</code></pre>
<table><thead>
<tr>
<th>Werte</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>actor</td>
<td>inkludiert die Akteure der gelieferten Aktivitäten</td>
</tr>
<tr>
<td>context</td>
<td>inkludiert die Kontexte der gelieferten Aktivitäten</td>
</tr>
<tr>
<td>object</td>
<td>inkludiert die Objekte der gelieferten Aktivitäten</td>
</tr>
</tbody></table>

<p>Der &#39;include&#39;-Parameter wird der JSON:API-Spezifikation entsprechend
verwendet. Es können auch mehrere Werte durch Komma getrennt angegeben werden.</p>
<h4 id='url-parameter-39-page-39'>URL-Parameter &#39;page&#39;</h4>
<table><thead>
<tr>
<th>Page-Parameter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>page[offset]</td>
<td>der Paginierungsoffset</td>
</tr>
<tr>
<td>page[limit]</td>
<td>das Paginierungslimit</td>
</tr>
</tbody></table>

<p>Der &#39;page&#39;-Parameter wird der JSON:API-Spezifikation entsprechend verwendet.</p>
<h3 id='meta-informationen'>Meta-Informationen</h3>
<p>Damit klar ersichtlich ist, welche Filter für die Abfrage galten,
werden diese Informationen als Top-Level-&#39;meta&#39;-Objekt zurückgegeben.</p>
<h3 id='authorisierung'>Authorisierung</h3>
<p>Mit dieser Route kann nur der Nutzer selbst oder Root-Nutzer
diejenigen Aktivitäten sehen, die für einen Nutzers sichtbar wären.</p>
<h1 id='dateibereich-v3-5'>Dateibereich v3.5</h1>
<aside class="warning">Dieser Abschnitt gilt für die Stud.IP v3.5. Ab Stud.IP v4.0 gibt es einen neuen Dateibereich.</aside>

<p>In Stud.IP hat jede Einrichtung und jede Veranstaltung einen eigenen
Dateibereich. Dateibereiche sind (spezielle) Ordner. Ordner können
Dateien und Ordner enthalten, in denen sich wiederum Dateien und
Ordner befinden können.</p>

<p>Es gibt verschiedene Arten von Ordnern, die sich in der Regel darin
unterscheiden, wer sie sehen kann und wer Lese- und/oder
Schreibzugriff auf diese Ordner hat.</p>

<p>Im Dateibereich von Stud.IP v3.5 werden drei Arten von Entitäten
verwendet. Es gibt Dokumente (type=documents), Ordner
(type=document-folders) und Lizenzen (type=document-licenses).</p>
<h2 id='schema-quot-documents-quot'>Schema &quot;documents&quot;</h2>
<p>In Stud.IP kann man Dokumente auf zwei Weisen einbinden. Zum einen
können Dokumente hochgeladen werden. Zum anderen kann auch einfach
eine URL hinterlegt werden, die via Stud.IP-Proxy an die Nutzer
herausgegeben wird. Dokumente bestehen sowohl aus ihren Metadaten (wie
Name und Beschreibung), als auch aus ihrem eigentlichen Inhalt.</p>

<p>TODO: download-link, url</p>
<h3 id='attribute'>Attribute</h3>
<table><thead>
<tr>
<th>Attribut</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Name des Dokuments</td>
</tr>
<tr>
<td>description</td>
<td>Beschreibung des Dokuments</td>
</tr>
<tr>
<td>filename</td>
<td>Dateiname des Dokuments</td>
</tr>
<tr>
<td>mkdate</td>
<td>Anlegedatum</td>
</tr>
<tr>
<td>chdate</td>
<td>Datum der letzten Änderung</td>
</tr>
<tr>
<td>filesize</td>
<td>Größe der Datei in Bytes</td>
</tr>
<tr>
<td>downloads</td>
<td>Anzahl der bisherigen Downloads</td>
</tr>
<tr>
<td>priority</td>
<td>Ordnungsnummer; dient der Sortierung in Stud.IP</td>
</tr>
</tbody></table>
<h3 id='relationen'>Relationen</h3>
<p>Derzeit können die Relationen nur ausgelesen, aber nicht verändert werden.</p>

<table><thead>
<tr>
<th>Relation</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>license</td>
<td>die Lizenz des Dokuments</td>
</tr>
<tr>
<td>owner</td>
<td>der Besitzer des Dokuments</td>
</tr>
<tr>
<td>parent</td>
<td>Speicherort des Dokuments; entweder ein Ordner oder eine Nachricht</td>
</tr>
<tr>
<td>range</td>
<td>Link zum Dateibereich, in dem sich das Dokument befindet; entweder eine Veranstaltung oder eine Einrichtung</td>
</tr>
</tbody></table>
<h2 id='schema-quot-document-folders-quot'>Schema &quot;document-folders&quot;</h2>
<p>Ordner enthalten Dokumente und können im Zugriff beschränkt werden</p>
<h3 id='attribute-2'>Attribute</h3>
<table><thead>
<tr>
<th>Attribut</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Name des Ordners</td>
</tr>
<tr>
<td>description</td>
<td>Beschreibung des Ordners</td>
</tr>
<tr>
<td>permission</td>
<td>Zugriffsbeschränkung des Ordners; ein String, der maximal aus &quot;frwx&quot; besteht</td>
</tr>
<tr>
<td>mkdate</td>
<td>Anlegedatum</td>
</tr>
<tr>
<td>chdate</td>
<td>Datum der letzten Änderung</td>
</tr>
<tr>
<td>priority</td>
<td>Ordnungsnummer; dient der Sortierung in Stud.IP</td>
</tr>
</tbody></table>

<p>Die Zugriffsbeschränkung ist als String kodiert, ähnlich wie im Dateisystem eines Betriebsystems. Maximal besteht es aus den Buchstaben &quot;frwx&quot;. Dabei bedeuten die Buchstaben folgendes:</p>

<table><thead>
<tr>
<th>Buchstabe</th>
<th>Bedeutung</th>
</tr>
</thead><tbody>
<tr>
<td>f</td>
<td>Ordner erstellen (Alle Nutzer können Ordner erstellen)</td>
</tr>
<tr>
<td>r</td>
<td>Lesen (Dateien können heruntergeladen werden)</td>
</tr>
<tr>
<td>w</td>
<td>Schreiben (Dateien können heraufgeladen werden)</td>
</tr>
<tr>
<td>x</td>
<td>Sichtbarkeit (Ordner wird angezeigt)</td>
</tr>
</tbody></table>
<h3 id='relationen-2'>Relationen</h3>
<p>Derzeit können die Relationen nur ausgelesen, aber nicht verändert werden.</p>

<table><thead>
<tr>
<th>Relation</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>documents</td>
<td>die im Ordner liegenden Dokumente</td>
</tr>
<tr>
<td>document-folders</td>
<td>der im Ordner liegenden Ordner</td>
</tr>
<tr>
<td>owner</td>
<td>der Besitzer des Ordners</td>
</tr>
<tr>
<td>parent</td>
<td>der übergeordnete Ordner des Ordners, falls es einen gibt</td>
</tr>
<tr>
<td>range</td>
<td>Link zum Dateibereich, in dem sich das Dokument befindet; entweder eine Veranstaltung oder eine Einrichtung</td>
</tr>
</tbody></table>
<h2 id='schema-quot-document-licenses-quot'>Schema &quot;document-licenses&quot;</h2>
<p>Dokumenten können Lizenzen zugeordnet sein.</p>

<table><thead>
<tr>
<th>Attribut</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Name der Lizenz</td>
</tr>
<tr>
<td>description</td>
<td>Beschreibung der Lizenz</td>
</tr>
<tr>
<td>student-description</td>
<td>TODO</td>
</tr>
<tr>
<td>protected</td>
<td>TODO</td>
</tr>
</tbody></table>

<p>Lizenzen haben keine Relationen.</p>
<h2 id='alle-dokumente-einer-veranstaltung-einrichtung'>Alle Dokumente einer Veranstaltung/Einrichtung</h2><pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
    --url https://example.com/api/courses/&lt;COURSE-ID&gt;/documents <span class="se">\</span>
    --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_autor:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://example.com/api/courses/&lt;COURSE-ID&gt;/documents'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
    <span class="na">mode</span><span class="p">:</span> <span class="s1">'cors'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>
        <span class="s1">'Authorization'</span><span class="p">:</span> <span class="s2">`Basic </span><span class="p">${</span><span class="nx">btoa</span><span class="p">(</span><span class="s1">'test_autor:testing'</span><span class="p">)}</span><span class="s2">`</span>
    <span class="p">})</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>Der Request liefert JSON ähnlich wie dieses:</p>
</blockquote>

<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"page"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/?page[offset]=0&amp;page[limit]=30"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/?page[offset]=0&amp;page[limit]=30"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"documents"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"210ea083325e12fdb2dd6eaa534d0570"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.json"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Eine Beschreibung"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.json"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mkdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-24T09:52:13+01:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"chdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-24T09:52:13+01:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"filesize"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
        </span><span class="s2">"downloads"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"parent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"document-folders"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b0243fbbd542ffa5d00eca4791540f03"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/document-folders/b0243fbbd542ffa5d00eca4791540f03"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"courses"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a07535cf2f8a72df33c12ddfa4b53dde"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/courses/a07535cf2f8a72df33c12ddfa4b53dde"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e7a0a84b161f3e8c09b4a0a2e8a58147"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/users/e7a0a84b161f3e8c09b4a0a2e8a58147"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/documents/210ea083325e12fdb2dd6eaa534d0570"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"download-url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/documents/210ea083325e12fdb2dd6eaa534d0570/content"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Wenn der Dateibereich in einer Veranstaltung aktiviert ist, kann man
mit dieser Route <strong>alle</strong> Dokumente einer Veranstaltung abfragen.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://example.com/jsonapi/courses/{id}/documents</code></p>
<h3 id='url-parameter'>URL-Parameter</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>die ID der Veranstaltung</td>
</tr>
</tbody></table>
<h3 id='authorisierung'>Authorisierung</h3>
<p>Diese Route kann von allen Nutzern verwendet werden, die Zugriff auf
die entsprechende Veranstaltung oder Einrichtung haben.</p>
<h2 id='alle-ordner-einer-veranstaltung-einrichtung'>Alle Ordner einer Veranstaltung/Einrichtung</h2><pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
    --url https://example.com/api/courses/&lt;COURSE-ID&gt;/document-folders <span class="se">\</span>
    --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_autor:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://example.com/api/courses/&lt;COURSE-ID&gt;/document-folders'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
    <span class="na">mode</span><span class="p">:</span> <span class="s1">'cors'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>
        <span class="s1">'Authorization'</span><span class="p">:</span> <span class="s2">`Basic </span><span class="p">${</span><span class="nx">btoa</span><span class="p">(</span><span class="s1">'test_autor:testing'</span><span class="p">)}</span><span class="s2">`</span>
    <span class="p">})</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>Der Request liefert JSON ähnlich wie dieses:</p>
</blockquote>

<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"page"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/?page[offset]=0&amp;page[limit]=30"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/?page[offset]=0&amp;page[limit]=30"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"document-folders"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4e06de84a2812908879eef42c9d652d9"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allgemeine Dateien"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allgemeine Beschreibung"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"permission"</span><span class="p">:</span><span class="w"> </span><span class="s2">"frwx"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mkdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-24T12:08:38+01:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"chdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-24T12:08:38+01:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"documents"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/document-folders/4e06de84a2812908879eef42c9d652d9/documents"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"document-folders"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/document-folders/4e06de84a2812908879eef42c9d652d9/document-folders"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e7a0a84b161f3e8c09b4a0a2e8a58147"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/users/e7a0a84b161f3e8c09b4a0a2e8a58147"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"courses"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a07535cf2f8a72df33c12ddfa4b53dde"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/courses/a07535cf2f8a72df33c12ddfa4b53dde"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/document-folders/4e06de84a2812908879eef42c9d652d9"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Wenn der Dateibereich in einer Veranstaltung aktiviert ist, kann man
mit dieser Route <strong>alle</strong> Ordner einer Veranstaltung abfragen, auf die
man Zugriff hat.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET https://example.com/(courses|institutes)/{id}/document-folders</code></p>
<h3 id='url-parameter-2'>URL-Parameter</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>die ID der Veranstaltung</td>
</tr>
</tbody></table>
<h3 id='authorisierung-2'>Authorisierung</h3>
<p>Diese Route kann von allen Nutzern verwendet werden, die Zugriff auf
die entsprechende Veranstaltung oder Einrichtung haben. Es werden aber
lediglich diejenigen Ordner gezeigt, die der Nutzer verwenden kann.</p>
<h2 id='ein-dokument-auslesen'>Ein Dokument auslesen</h2><pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
    --url https://example.com/api/documents/<span class="o">{</span>id<span class="o">}</span> <span class="se">\</span>
    --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_autor:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://example.com/api/documents/{id}'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
    <span class="na">mode</span><span class="p">:</span> <span class="s1">'cors'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>
        <span class="s1">'Authorization'</span><span class="p">:</span> <span class="s2">`Basic </span><span class="p">${</span><span class="nx">btoa</span><span class="p">(</span><span class="s1">'test_autor:testing'</span><span class="p">)}</span><span class="s2">`</span>
    <span class="p">})</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>Der Request liefert JSON ähnlich wie dieses:</p>
</blockquote>

<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"documents"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"81a3eec43cf70a11b9926649f19b3988"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.json"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Eine Beschreibung"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.json"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mkdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-24T13:36:18+01:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"chdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-24T13:36:18+01:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"filesize"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
      </span><span class="s2">"downloads"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"parent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"document-folders"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dab61ecc743f55662311bec4afcfc7e9"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/document-folders/dab61ecc743f55662311bec4afcfc7e9"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"courses"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a07535cf2f8a72df33c12ddfa4b53dde"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/courses/a07535cf2f8a72df33c12ddfa4b53dde"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e7a0a84b161f3e8c09b4a0a2e8a58147"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/users/e7a0a84b161f3e8c09b4a0a2e8a58147"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/documents/81a3eec43cf70a11b9926649f19b3988"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"download-url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/documents/81a3eec43cf70a11b9926649f19b3988/content"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Mit dieser Route kann man ein einzelnes Dokument auslesen, wenn man
darauf Zugriff hat.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET https://example.com/documents/{id}</code></p>
<h3 id='url-parameter-3'>URL-Parameter</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>die ID des Dokuments</td>
</tr>
</tbody></table>
<h3 id='authorisierung-3'>Authorisierung</h3>
<p>Autoren sehen nur eingeschränkt Dokumente in ihren Veranstaltungen (nach den üblichen
Stud.IP-Regeln). Tutoren und Dozenten haben Zugriff auf alle Dokumente
ihrer Veranstaltung; Administratoren entsprechend auf Dokumente, die
zu Veranstaltungen ihrer Einrichtungen gehören; Root natürlich auf alle.</p>
<h2 id='eine-dokument-datei-herunterladen'>Eine Dokument-Datei herunterladen</h2><pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
    --url https://example.com/api/documents/<span class="o">{</span>id<span class="o">}</span> <span class="se">\</span>
    --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_autor:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://example.com/api/documents/{id}/content'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
    <span class="na">mode</span><span class="p">:</span> <span class="s1">'cors'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>
        <span class="s1">'Authorization'</span><span class="p">:</span> <span class="s2">`Basic </span><span class="p">${</span><span class="nx">btoa</span><span class="p">(</span><span class="s1">'test_autor:testing'</span><span class="p">)}</span><span class="s2">`</span>
    <span class="p">})</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>Der Request liefert in der Regel kein JSON. (Es sei denn, dass das Dokument ein JSON-Objekt war.)</p>
</blockquote>

<aside class="warning">Diese Route ist keine JSON:API Route, da sie den
Inhalt der Datei liefert.</aside>

<p>Mit dieser Route kann man die tatsächliche Datei herunterladen. Diese
wird in der Regel nicht als JSON ausgeliefert.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET https://example.com/documents/{id}/content</code></p>
<h3 id='url-parameter-4'>URL-Parameter</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>die ID des Dokuments</td>
</tr>
</tbody></table>
<h3 id='authorisierung-4'>Authorisierung</h3>
<p>Autoren können nur eingeschränkt Dokumente in ihren Veranstaltungen
herunterladen (nach den üblichen Stud.IP-Regeln). Tutoren und Dozenten
haben Zugriff auf alle Dokumente ihrer Veranstaltung; Administratoren
entsprechend auf Dokumente, die zu Veranstaltungen ihrer Einrichtungen
gehören; Root natürlich auf alle.</p>
<h2 id='eine-dokument-datei-aktualisieren'>Eine Dokument-Datei aktualisieren</h2><pre class="highlight shell tab-shell"><code>curl --request POST --form <span class="s1">'file=@die-aktuelle-datei.jpg'</span> <span class="se">\</span>
     --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_dozent:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span> <span class="se">\</span>
     --url <span class="s2">"https://example.com/api/documents/{id}/content"</span>
</code></pre>
<aside class="warning">Diese Route ist keine JSON:API Route.</aside>

<p>Mit dieser Route kann man den Inhalt eines vorhandenen Dokuments aktualisieren.</p>

<p>Dazu sendet man einen <code>POST</code>-Request an dieselbe Route, von der aus man auch den Inhalt herunterladen würde.</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>POST https://example.com/documents/{id}/content</code></p>
<h3 id='url-parameter-5'>URL-Parameter</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>die ID des Dokuments</td>
</tr>
</tbody></table>
<h3 id='authorisierung-5'>Authorisierung</h3>
<p>Die Berechtigungsregeln zum Aktualisieren des Inhalts eines Dokuments sind komplex. In der Regel darf man seine eigenen
Dokumente und Tutoren und Dozenten die meisten anderen Dokumente aktualisieren. Die Berechtigungsregeln entsprechen dem
Verhalten, das Stud.IP über die Web-Oberfläche zeigt.</p>
<h2 id='ein-dokument-erstellen'>Ein Dokument erstellen</h2>
<p>Ein Dokument wird immer in einem Ordner erstellt. Da wie oben
beschrieben Dokumente aus Metadaten <strong>und</strong> Inhalt bestehen, muss das
Anlegen einer Datei in zwei Schritten passieren. Dazu kann entweder
a.) zuerst der Inhalt hochgeladen werden und dann die Metadaten (wie
Beschreibung und Lizenz) angepasst werden oder b.) erst die Datei mit
den Metadaten erstellt werden und nachträglich der Inhalt hochgeladen
werden.</p>
<h3 id='variante-a'>Variante a.</h3><pre class="highlight shell tab-shell"><code>curl --request POST --form <span class="s1">'file=@eine-neue-datei.jpg'</span> <span class="se">\</span>
     --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_dozent:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span> <span class="se">\</span>
     --url <span class="s2">"https://example.com/api/document-folders/{id}/documents"</span>
</code></pre>
<p>Zuerst sendet man einen <code>POST</code>-Request mit <code>Content-Type:
multipart/form-data</code> und der Datei im Request-Body an die unten
angegebene URL.</p>

<p>Man erhält im Erfolgsfall einen Status-Code 201 und einen
Location-Header, der einen zum neu erstellten Dokument in die JSON:API
bringt.</p>

<p>Der <em>Dateiname</em> wird standardmäßig aus dem Upload genommen und auch
 für den Namen der Datei verwendet.</p>

<p>Will man einen anderen Dateinamen verwenden, kann man einen
HTTP-Header wie: <code>Slug: neuer-dateiname.txt</code> verwenden.</p>

<p>Über die URL aus dem erhaltenen <code>Location</code>-Header erhält man die
JSON:API-Repräsentation der hochgeladenen Datei.</p>

<p>Nun können mit einem (JSON:API-typischen) <code>PATCH</code>-Request an diese
Route Modifikationen an den Metadaten (wie Beschreibung usw.)
vorgenommen werden.</p>
<h3 id='variante-b'>Variante b.</h3><pre class="highlight shell tab-shell"><code>curl --request POST <span class="se">\</span>
    --url https://example.com/api/document-folders/<span class="o">{</span>id<span class="o">}</span>/documents <span class="se">\</span>
    --header <span class="s2">"Content-Type: application/vnd.api+json"</span> <span class="se">\</span>
    --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_autor:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span> <span class="se">\</span>
    --data <span class="s1">'{"data": { "type": "documents", "attributes": { "name": "iason.txt", "description": "Iasons Lebenslauf", "filename": "iason.txt"}}}'</span>
</code></pre>
<p>Zunächst sendet man einen <code>POST</code>-Request mit <code>Content-Type:
application/vnd.api+json</code> an die unten angegebene URL.</p>

<p>Im Request-Body muss dann eine JSON:API-typische Repräsentation des
neuen Dokuments enthalten sein. Im Erfolgsfall erhält man dann eine
Repräsentation der neu angelegten Datei, die aber derzeit noch keinen
Inhalt hat.</p>

<p>Daher muss der Inhalt in einem zweiten Request hochgeladen werden.
Dazu wird unter &quot;Eine Dokument-Datei aktualisieren&quot; beschrieben ein
<code>POST</code>-Request an die <code>content</code>-URL geschickt.</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>POST https://example.com/document-folders/{id}/documents</code></p>
<h3 id='url-parameter-6'>URL-Parameter</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>die ID des Dokuments</td>
</tr>
</tbody></table>
<h3 id='http-request-body'>HTTP Request Body</h3>
<p>Im Request-Body muss das neue Dokument als ein einziges <code>resource object</code> enthalten sein. Das <code>resource object</code> muss im <code>type</code>-Attribut &quot;documents&quot; enthalten und darf keine <code>id</code> haben. Ein Beispiel:</p>
<pre class="highlight plaintext"><code>POST /document-folders/{id}/documents HTTP/1.1
Content-Type: application/vnd.api+json
Accept: application/vnd.api+json

{
  "data": {
    "type": "documents",
    "attributes": {
      "name": "Der Name des Dokuments",
      "description": "Die Beschreibung des Dokuments",
      "filename": "test-file.txt"
    }
}

### Authorisierung

Die Berechtigungen zum Anlegen eines Dokuments in einem Ordner sind komplex und entsprechend denen, die in der Web-Oberfläche von Stud.IP verwendet werden.


## Ein Dokument löschen
```shell
curl --request DELETE \
    --url https://example.com/api/documents/{id} \
    --header "Authorization: Basic `echo -ne "test_autor:testing" | base64`"
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://example.com/api/documents/{id}'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="s1">'DELETE'</span><span class="p">,</span>
    <span class="na">mode</span><span class="p">:</span> <span class="s1">'cors'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>
        <span class="s1">'Authorization'</span><span class="p">:</span> <span class="s2">`Basic </span><span class="p">${</span><span class="nx">btoa</span><span class="p">(</span><span class="s1">'test_autor:testing'</span><span class="p">)}</span><span class="s2">`</span>
    <span class="p">})</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>Der Request liefert nichts zurück.</p>
</blockquote>

<p>Mit dieser Route kann man eine Datei löschen. Gemäß
JSON-API-Spezifikation antwortet der Server im Erfolgsfall mit einem
Status-Code 204.</p>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>DELETE https://example.com/documents/{id}</code></p>
<h3 id='url-parameter-7'>URL-Parameter</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>die ID des Dokuments</td>
</tr>
</tbody></table>
<h3 id='authorisierung-6'>Authorisierung</h3>
<p>Eigene Dateien können gelöscht werden. Ansonsten gelten die für die
Veranstaltung bzw. Einrichtungen geltenden Einschränkungen ganz genau
wie im üblichen Stud.IP.</p>
<h2 id='einen-ordner-auslesen'>Einen Ordner auslesen</h2><pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
    --url https://example.com/api/document-folders/<span class="o">{</span>id<span class="o">}</span> <span class="se">\</span>
    --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_autor:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://example.com/api/document-folders/{id}'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
    <span class="na">mode</span><span class="p">:</span> <span class="s1">'cors'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>
        <span class="s1">'Authorization'</span><span class="p">:</span> <span class="s2">`Basic </span><span class="p">${</span><span class="nx">btoa</span><span class="p">(</span><span class="s1">'test_autor:testing'</span><span class="p">)}</span><span class="s2">`</span>
    <span class="p">})</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>Der Request liefert JSON ähnlich wie dieses:</p>
</blockquote>

<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"document-folders"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"106ca0f8cc1534f79770499fee2f2f91"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allgemeine Dateien"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allgemeine Beschreibung"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"permission"</span><span class="p">:</span><span class="w"> </span><span class="s2">"frwx"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mkdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-30T10:07:17+01:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"chdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-30T10:07:17+01:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"documents"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/document-folders/106ca0f8cc1534f79770499fee2f2f91/documents"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"document-folders"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/document-folders/106ca0f8cc1534f79770499fee2f2f91/document-folders"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e7a0a84b161f3e8c09b4a0a2e8a58147"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/users/e7a0a84b161f3e8c09b4a0a2e8a58147"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"courses"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a07535cf2f8a72df33c12ddfa4b53dde"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/courses/a07535cf2f8a72df33c12ddfa4b53dde"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/document-folders/106ca0f8cc1534f79770499fee2f2f91"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>GET https://example.com/document-folders/{id}</code></p>
<h3 id='url-parameter-8'>URL-Parameter</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>die ID des Ordners</td>
</tr>
</tbody></table>
<h3 id='authorisierung-7'>Authorisierung</h3>
<p>Autoren sehen nur eingeschränkt Ordner in ihren Veranstaltungen
(nach den üblichen Stud.IP-Regeln). Tutoren und Dozenten haben Zugriff
auf alle Ordner ihrer Veranstaltung; Administratoren entsprechend
auf Ordner, die zu Veranstaltungen ihrer Einrichtungen gehören;
Root natürlich auf alle.</p>
<h2 id='alle-kindordner-eines-ordners'>Alle Kindordner eines Ordners</h2><pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
    --url https://example.com/api/document-folders/<span class="o">{</span>id<span class="o">}</span>/document-folders <span class="se">\</span>
    --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_autor:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://example.com/api/document-folders/{id}/document-folders'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
    <span class="na">mode</span><span class="p">:</span> <span class="s1">'cors'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>
        <span class="s1">'Authorization'</span><span class="p">:</span> <span class="s2">`Basic </span><span class="p">${</span><span class="nx">btoa</span><span class="p">(</span><span class="s1">'test_autor:testing'</span><span class="p">)}</span><span class="s2">`</span>
    <span class="p">})</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>Der Request liefert JSON ähnlich wie dieses:</p>
</blockquote>

<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"page"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/?page[offset]=0&amp;page[limit]=30"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/?page[offset]=0&amp;page[limit]=30"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"document-folders"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b819b13a4845547ed77db16f03969900"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kind 1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"permission"</span><span class="p">:</span><span class="w"> </span><span class="s2">"frwx"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mkdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-30T10:30:41+01:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"chdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-30T10:30:41+01:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"documents"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/document-folders/b819b13a4845547ed77db16f03969900/documents"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"document-folders"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/document-folders/b819b13a4845547ed77db16f03969900/document-folders"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e7a0a84b161f3e8c09b4a0a2e8a58147"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/users/e7a0a84b161f3e8c09b4a0a2e8a58147"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"parent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"document-folders"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9414828f7dd9c36975ac44e464f68d9c"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/document-folders/9414828f7dd9c36975ac44e464f68d9c"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"courses"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a07535cf2f8a72df33c12ddfa4b53dde"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/courses/a07535cf2f8a72df33c12ddfa4b53dde"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/document-folders/b819b13a4845547ed77db16f03969900"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"[...]"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>GET https://example.com/document-folders/{id}/document-folders</code></p>
<h3 id='url-parameter-9'>URL-Parameter</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>die ID des Ordners</td>
</tr>
</tbody></table>
<h3 id='authorisierung-8'>Authorisierung</h3>
<p>Die Kindordner eines Ordners darf man nur sehen, wenn man den Ordner
sehen würde. Außerdem greifen die Stud.IP-üblichen Beschränkungen:
Hausaufgabenorder und Dateiberechtigungen werden entsprechend
berücksichtigt.</p>
<h2 id='alle-dokumente-eines-ordners'>Alle Dokumente eines Ordners</h2><pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
    --url https://example.com/api/document-folders/<span class="o">{</span>id<span class="o">}</span>/documents <span class="se">\</span>
    --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_autor:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://example.com/api/document-folders/{id}/documents'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
    <span class="na">mode</span><span class="p">:</span> <span class="s1">'cors'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>
        <span class="s1">'Authorization'</span><span class="p">:</span> <span class="s2">`Basic </span><span class="p">${</span><span class="nx">btoa</span><span class="p">(</span><span class="s1">'test_autor:testing'</span><span class="p">)}</span><span class="s2">`</span>
    <span class="p">})</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>Der Request liefert JSON ähnlich wie dieses:</p>
</blockquote>

<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"page"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/?page[offset]=0&amp;page[limit]=30"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/?page[offset]=0&amp;page[limit]=30"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"documents"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1a7be00625cb1b71cdf113b3d4d42957"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dateiname1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dateibeschreibung 1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dateiname1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mkdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-30T10:35:54+01:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"chdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-30T10:35:54+01:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"filesize"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
        </span><span class="s2">"downloads"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"parent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"document-folders"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8ed90d64dfdc754e6fd6cc5bdcbbc5c9"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/document-folders/8ed90d64dfdc754e6fd6cc5bdcbbc5c9"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"courses"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a07535cf2f8a72df33c12ddfa4b53dde"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/courses/a07535cf2f8a72df33c12ddfa4b53dde"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e7a0a84b161f3e8c09b4a0a2e8a58147"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"related"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/users/e7a0a84b161f3e8c09b4a0a2e8a58147"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/documents/1a7be00625cb1b71cdf113b3d4d42957"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"download-url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/documents/1a7be00625cb1b71cdf113b3d4d42957/content"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"[...]"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='http-request-10'>HTTP Request</h3>
<p><code>GET https://example.com/document-folders/{id}/documents</code></p>
<h3 id='url-parameter-10'>URL-Parameter</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>die ID des Ordners</td>
</tr>
</tbody></table>
<h3 id='authorisierung-9'>Authorisierung</h3>
<p>Die Dokumente eines Ordners darf man nur sehen, wenn man den Ordner
sehen würde. Außerdem greifen die Stud.IP-üblichen Beschränkungen:
Hausaufgabenorder und Dateiberechtigungen werden entsprechend
berücksichtigt.</p>
<h2 id='eine-lizenz-auslesen'>Eine Lizenz auslesen</h2><pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
    --url https://example.com/api/document-licenses/<span class="o">{</span>id<span class="o">}</span> <span class="se">\</span>
    --header <span class="s2">"Authorization: Basic </span><span class="sb">`</span><span class="nb">echo</span> -ne <span class="s2">"test_autor:testing"</span> | base64<span class="sb">`</span><span class="s2">"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://example.com/api/document-licenses/{id}'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
    <span class="na">mode</span><span class="p">:</span> <span class="s1">'cors'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>
        <span class="s1">'Authorization'</span><span class="p">:</span> <span class="s2">`Basic </span><span class="p">${</span><span class="nx">btoa</span><span class="p">(</span><span class="s1">'test_autor:testing'</span><span class="p">)}</span><span class="s2">`</span>
    <span class="p">})</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>Der Request liefert JSON ähnlich wie dieses:</p>
</blockquote>

<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"document-licenses"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ungekl</span><span class="se">\u</span><span class="s2">00c3</span><span class="se">\u</span><span class="s2">00a4rte Lizenz"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bitte geben Sie an, welcher Lizenz das hochgeladene Material unterliegt bzw. auf welcher Grundlage Sie es zug</span><span class="se">\u</span><span class="s2">00c3</span><span class="se">\u</span><span class="s2">00a4nglich machen. Unterbleibt diese Angabe, wird beim Herunterladen auf den ungekl</span><span class="se">\u</span><span class="s2">00c3</span><span class="se">\u</span><span class="s2">00a4rten Lizenzstatus hingewiesen."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"student-description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Diese Datei enth</span><span class="se">\u</span><span class="s2">00c3</span><span class="se">\u</span><span class="s2">00a4lt Material mit einer ungekl</span><span class="se">\u</span><span class="s2">00c3</span><span class="se">\u</span><span class="s2">00a4rten Lizenz. Zu Fragen der Nutzung und Weitergabe wenden Sie sich an die Person, die diese Datei hochgeladen hat."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/document-licenses/2"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='http-request-11'>HTTP Request</h3>
<p><code>GET https://example.com/document-licenses/{id}</code></p>
<h3 id='url-parameter-11'>URL-Parameter</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>die ID der Lizenz</td>
</tr>
</tbody></table>
<h3 id='authorisierung-10'>Authorisierung</h3>
<p>Jeder kann Lizenzen auslesen.</p>
<h1 id='dateibereich-v4-0'>Dateibereich v4.0+</h1>
<aside class="warning">Dieser Abschnitt gilt für die Stud.IP >= v4.0 Die
Stud.IP v3.5 verwendet den alten Dateibereich.</aside>

<p>In Stud.IP hat jeder Nutzer, jede Einrichtung und jede Veranstaltung
einen eigenen Dateibereich. Dateibereiche sind (spezielle) Ordner.
Ordner können Dateien und Ordner enthalten, in denen sich wiederum
Dateien und Ordner befinden können.</p>

<p>Es gibt verschiedene Arten von Ordnern, die sich in der Regel darin
unterscheiden, wer sie sehen kann und wer Lese- und/oder
Schreibzugriff auf diese Ordner hat.</p>
<h2 id='schemata'>Schemata</h2><h3 id='type-quot-file-refs-quot'>Type &quot;file-refs&quot;</h3>
<p>TODO</p>
<h3 id='type-quot-files-quot'>Type &quot;files&quot;</h3>
<p>TODO</p>
<h3 id='type-quot-folders-quot'>Type &quot;folders&quot;</h3>
<p>TODO</p>
<h2 id='alle-dateien-einer-veranstaltung'>Alle Dateien einer Veranstaltung</h2><pre class="highlight shell tab-shell"><code>TODO
</code></pre>
<blockquote>
<p>Der Request liefert JSON ähnlich wie dieses:</p>
</blockquote>

<p>Wenn in einer Veranstaltung der Dateibereich aktiviert ist, erhält man
mit der ID der Veranstaltung über diesen Endpoint den Wurzelordner der Veranstaltung.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://example.com/jsonapi/courses/{id}/files</code></p>
<h3 id='url-parameter'>URL-Parameter</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Beschreibung</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>die ID der Veranstaltung</td>
</tr>
</tbody></table>
<h1 id='fehler'>Fehler</h1>
<p>Die Stud.IP-JSON:API verwendet die Fehler-Codes, die auch in der <a
href="http://jsonapi.org/format">JSON-API-Spezifikation</a> verwendet
werden.</p>

<table><thead>
<tr>
<th>Fehler Code</th>
<th>Bedeutung</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized – Sie haben nicht die erforderliche Berechtigung.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden – Die gewünschte Operation steht nicht zur Verfügung.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found – Die gewünschte Ressource oder Relation konnte nicht gefunden werden.</td>
</tr>
<tr>
<td>409</td>
<td>Conflict  – Beim Anlegen oder Ändern von Ressourcen oder Relationen werden Beschränkungen im Stud.IP verletzt. Beispiel: Eine Ressource falschen Typs soll einer Relation hinzugefügt werden.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error – Es gibt ein Problem auf dem Server. Versuchen Sie es später erneut!</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
